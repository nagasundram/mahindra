<div>
  <div class="form-group">
    <%= label_tag(:card_number, "Gift Card Number") %>
    <%= text_field_tag(:card_number, '', class: 'form-control', disabled: true, value: @gift_card.card_number) %>
  </div>
  <div class="form-group">
    <%= label_tag(:expiry, "Expiration Date") %>
    <%= text_field_tag(:expiry, '', class: 'form-control', disabled: true, value: @gift_card.expiry) %>
  </div>
  <div class="form-group">
    <%= label_tag(:balance, "Gift Card Balance") %>
    <%= text_field_tag(:balance, '', class: 'form-control', disabled: true, value: @gift_card.balance) %>
  </div>
  <button class="btn btn-primary" data-toggle="modal" data-target="#redeemModal">
    Redeem
  </button>
  <div class="modal fade" id="redeemModal" tabindex="-1" role="dialog" aria-labelledby="redeemModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Redeem Amount</h4>
        </div>
        <div class="modal-body">
          <%= form_for(@gift_card.transactions.new, html: {method: :post}) do |f|  %>
            <div class="form-group">
              <%= label_tag(:card_number, "Gift Card Number") %>
              <%= text_field_tag(:card_number, '', class: 'form-control', disabled: true, value: @gift_card.card_number) %>
            </div>
            <div class="form-group">
              <%= label_tag(:expiry, "Expiration Date") %>
              <%= text_field_tag(:expiry, '', class: 'form-control', disabled: true, value: @gift_card.expiry) %>
            </div>
            <div class="form-group">
              <%= label_tag(:balance, "Gift Card Balance") %>
              <%= text_field_tag(:balance, '', class: 'form-control', disabled: true, value: @gift_card.balance) %>
            </div>
            <%= f.hidden_field :gift_card_id, value: @gift_card.id %>
            <div class="form-group">
              <%= f.text_field :invoice_number, placeholder: 'Invoice Number', :autofocus => true, class: 'form-control', required: true %>
            </div>
            <div class="form-group">
              <%= f.text_field :redeemed_value, placeholder: 'Amount', class: 'form-control', required: true %>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            <%= submit_tag "Submit", class: "btn btn-success", data: { disable_with: false } %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <table>
    <th>Date</th>
    <th>Invoice Number</th>
    <th>Store Code</th>
    <th>Store Name</th>
    <th>Redeemed</th>
    <th>Balance</th>
    <% @transactions.each do |transaction| %>
      <tr>
        <%= render partial: 'transactions/transaction', locals: { transaction: transaction }%>
      </tr>
    <% end %>
  </table>
</div>